{"ast":null,"code":"import _regeneratorRuntime from \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-client/src/components/views/Cartpage.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { api, handleError } from 'helpers/api';\nimport { Spinner } from 'components/ui/Spinner';\nimport { SmallButton } from 'components/ui/SmallButton';\nimport { Link, useHistory, useParams } from 'react-router-dom';\nimport BaseContainer from \"components/ui/BaseContainer\";\nimport PropTypes from \"prop-types\";\nimport \"styles/views/Cartpage.scss\";\nimport User from \"../../models/User\";\nimport Book from \"../../models/Book\";\nimport Cart from \"../../models/Cart\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Header = function Header(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"headertitle container\",\n    style: {\n      height: props.height\n    },\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"headertitle title\",\n      children: \"Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 9\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 5\n  }, _this);\n};\n_c = Header;\nvar Cartpage = function Cartpage() {\n  _s();\n  var history = useHistory();\n  var _useState = useState(new Cart()),\n    _useState2 = _slicedToArray(_useState, 2),\n    cart = _useState2[0],\n    setCart = _useState2[1];\n  var _useParams = useParams(),\n    id = _useParams.id;\n\n  //back to main page\n  var backToGame = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            history.push('/game');\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function backToGame() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    //Fetch cart's information from server side\n    function fetchCart() {\n      return _fetchCart.apply(this, arguments);\n    }\n    function _fetchCart() {\n      _fetchCart = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var user_id, response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              user_id = id;\n              _context2.next = 4;\n              return api.get('/cart/' + user_id);\n            case 4:\n              response = _context2.sent;\n              _context2.next = 7;\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, 1000);\n              });\n            case 7:\n              // Get the returned cart and update the state.\n              setCart(response.data);\n              console.log(response);\n              _context2.next = 16;\n              break;\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(\"You have not uploaded any book.\");\n              console.error(\"Details:\", _context2.t0);\n              alert(\"You have not uploaded any book.\");\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 11]]);\n      }));\n      return _fetchCart.apply(this, arguments);\n    }\n    fetchCart();\n  }, []);\n  var cartcontent = /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 23\n  }, _this);\n  if (cart) {\n    cartcontent = /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: cart.books.map(function (book) {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: book.image,\n              alt: book.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 31\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 29\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: book.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 31\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"by \", book.author]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 31\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 29\n          }, _this)]\n        }, book.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 27\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, _this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      height: \"100\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"headertitle title\",\n      children: \"Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"My Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total Price:\", cart.prices]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, _this), cartcontent]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 11\n  }, _this);\n};\n_s(Cartpage, \"Z8jDszyd3Q9QS2wyehoxILynlLY=\", false, function () {\n  return [useHistory, useParams];\n});\n_c2 = Cartpage;\nexport default Cartpage;\nvar _c, _c2;\n$RefreshReg$(_c, \"Header\");\n$RefreshReg$(_c2, \"Cartpage\");","map":{"version":3,"names":["React","useEffect","useState","api","handleError","Spinner","SmallButton","Link","useHistory","useParams","BaseContainer","PropTypes","User","Book","Cart","jsxDEV","_jsxDEV","Header","props","className","style","height","children","fileName","_jsxFileName","lineNumber","columnNumber","_this","_c","Cartpage","_s","history","_useState","_useState2","_slicedToArray","cart","setCart","_useParams","id","backToGame","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","push","stop","apply","arguments","fetchCart","_fetchCart","_callee2","user_id","response","_callee2$","_context2","get","sent","Promise","resolve","setTimeout","data","console","log","t0","error","alert","cartcontent","books","map","book","src","image","alt","title","author","prices","_c2","$RefreshReg$"],"sources":["/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-client/src/components/views/Cartpage.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {api, handleError} from 'helpers/api';\nimport {Spinner} from 'components/ui/Spinner';\nimport {SmallButton} from 'components/ui/SmallButton';\nimport {Link, useHistory, useParams} from 'react-router-dom';\nimport BaseContainer from \"components/ui/BaseContainer\";\nimport PropTypes from \"prop-types\";\nimport \"styles/views/Cartpage.scss\";\nimport User from \"../../models/User\";\nimport Book from \"../../models/Book\";\nimport Cart from \"../../models/Cart\";\n\n\nconst Header = props => (\n    <div className=\"headertitle container\" style={{height: props.height}}>\n        <h1 className=\"headertitle title\">Cart</h1>\n\n    </div>\n);\n\n\nconst Cartpage =() => {\n\n    const history = useHistory();\n\n    const [cart, setCart] = useState(new Cart());\n    const {id} = useParams();\n\n    //back to main page\n    const backToGame = async () => {\n        history.push('/game');\n    }\n\n    useEffect(() => {\n        //Fetch cart's information from server side\n        async function fetchCart() {\n            try {\n                var user_id = id;\n                const response = await api.get('/cart/' + user_id);\n                await new Promise(resolve => setTimeout(resolve, 1000));\n                // Get the returned cart and update the state.\n                setCart(response.data);\n                console.log(response);\n            } catch (error) {\n                console.error(`You have not uploaded any book.`);\n                console.error(\"Details:\", error);\n                alert(\"You have not uploaded any book.\");\n            }\n        }\n\n        fetchCart();\n    }, []);\n\n    let cartcontent = <Spinner/>;\n\n    if(cart){\n        cartcontent=(\n            <ul>\n                {cart.books.map(book => (\n                          <li key={book.id}>\n                            <div>\n                              <img src={book.image} alt={book.title} />\n                            </div>\n                            <div>\n                              <h3>{book.title}</h3>\n                              <p>by {book.author}</p>\n                            </div>\n                          </li>\n                        ))}\n            </ul>\n        )\n    }\n\n    return(\n          <div>\n            <Header height=\"100\"/>\n            <h1 className=\"headertitle title\">Cart</h1>\n            <div className=\"cart\">\n                <h2>My Cart</h2>\n                <h3>Total Price:{cart.prices}</h3>\n                {cartcontent}\n            </div>\n          </div>\n\n    );\n\n}\n\nexport default Cartpage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}