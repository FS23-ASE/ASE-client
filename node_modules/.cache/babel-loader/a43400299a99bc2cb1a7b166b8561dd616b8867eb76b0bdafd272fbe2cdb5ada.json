{"ast":null,"code":"import _regeneratorRuntime from \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-client/src/components/views/Login.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { api, handleError } from 'helpers/api';\nimport User from 'models/User';\nimport { useHistory } from 'react-router-dom';\nimport { Button } from 'components/ui/Button';\nimport 'styles/views/Login.scss';\nimport BaseContainer from \"components/ui/BaseContainer\";\nimport PropTypes from \"prop-types\";\nimport Header from \"components/views/Header\";\n\n/*\nComponent for login and registration\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar FormField = function FormField(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login field\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"login label\",\n      children: props.label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"login input\",\n      placeholder: \"enter here..\",\n      value: props.value,\n      onChange: function onChange(e) {\n        return props.onChange(e.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 5\n  }, _this);\n};\n_c = FormField;\nFormField.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.string,\n  onChange: PropTypes.func\n};\nvar Login = function Login(props) {\n  _s();\n  var history = useHistory();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    password = _useState2[0],\n    setPassword = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    username = _useState4[0],\n    setUsername = _useState4[1];\n\n  //Registration function\n  var goRegister = function goRegister() {\n    history.push('/register');\n  };\n\n  //Login function\n  var doLogin = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var requestBody, response, user;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            requestBody = JSON.stringify({\n              username: username,\n              password: password\n            });\n            console.log(requestBody);\n            _context.next = 5;\n            return api.put('/users/login', requestBody);\n          case 5:\n            response = _context.sent;\n            // Get the returned user and update a new object.\n            user = new User(response.data); // Store the token into the local storage.\n            localStorage.setItem('token', user.token);\n            localStorage.setItem('id', user.id);\n\n            // Login successfully worked --> navigate to the route /game in the GameRouter\n            history.push(\"/game\");\n            _context.next = 15;\n            break;\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](0);\n            alert(\"Something went wrong during the login: \\n\".concat(handleError(_context.t0)));\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n    return function doLogin() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return /*#__PURE__*/_jsxDEV(BaseContainer, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        height: \"100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login form\",\n          children: [/*#__PURE__*/_jsxDEV(FormField, {\n            label: \"Username\",\n            value: username,\n            onChange: function onChange(un) {\n              return setUsername(un);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(FormField, {\n            label: \"Password\",\n            value: password,\n            onChange: function onChange(n) {\n              return setPassword(n);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"registration button-container\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              width: \"100%\",\n              onClick: function onClick() {\n                return goRegister();\n              },\n              children: \"Register\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 13\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login button-container\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              disabled: !username || !password,\n              width: \"100%\",\n              onClick: function onClick() {\n                return doLogin();\n              },\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 13\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 11\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, _this);\n};\n_s(Login, \"vBCMzZecyNW5ZQ6mEw/6+Ys9fGw=\", false, function () {\n  return [useHistory];\n});\n_c2 = Login;\nexport default Login;\nvar _c, _c2;\n$RefreshReg$(_c, \"FormField\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"names":["React","useState","api","handleError","User","useHistory","Button","BaseContainer","PropTypes","Header","jsxDEV","_jsxDEV","FormField","props","className","children","label","fileName","_jsxFileName","lineNumber","columnNumber","_this","placeholder","value","onChange","e","target","_c","propTypes","string","func","Login","_s","history","_useState","_useState2","_slicedToArray","password","setPassword","_useState3","_useState4","username","setUsername","goRegister","push","doLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","requestBody","response","user","wrap","_callee$","_context","prev","next","JSON","stringify","console","log","put","sent","data","localStorage","setItem","token","id","t0","alert","concat","stop","apply","arguments","height","un","n","width","onClick","disabled","_c2","$RefreshReg$"],"sources":["/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-client/src/components/views/Login.js"],"sourcesContent":["import React, {useState} from 'react';\nimport {api, handleError} from 'helpers/api';\nimport User from 'models/User';\nimport {useHistory} from 'react-router-dom';\nimport {Button} from 'components/ui/Button';\nimport 'styles/views/Login.scss';\nimport BaseContainer from \"components/ui/BaseContainer\";\nimport PropTypes from \"prop-types\";\nimport Header from \"components/views/Header\";\n\n\n/*\nComponent for login and registration\n */\nconst FormField = props => {\n  return (\n    <div className=\"login field\">\n      <label className=\"login label\">\n        {props.label}\n      </label>\n      <input\n        className=\"login input\"\n        placeholder=\"enter here..\"\n        value={props.value}\n        onChange={e => props.onChange(e.target.value)}\n      />\n    </div>\n  );\n};\n\nFormField.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.string,\n  onChange: PropTypes.func\n};\n\nconst Login = props => {\n  const history = useHistory();\n  const [password, setPassword] = useState('');\n  const [username, setUsername] = useState('');\n\n  //Registration function\n  const goRegister = () => {\n    history.push('/register');\n  }\n\n  //Login function\n  const doLogin = async () => {\n    try {\n      const requestBody = JSON.stringify({username, password});\n      console.log(requestBody);\n      const response = await api.put('/users/login', requestBody);\n\n      // Get the returned user and update a new object.\n      const user = new User(response.data);\n\n      // Store the token into the local storage.\n      localStorage.setItem('token', user.token);\n      localStorage.setItem('id', user.id);\n\n      // Login successfully worked --> navigate to the route /game in the GameRouter\n      history.push(`/game`);\n    } catch (error) {\n      alert(`Something went wrong during the login: \\n${handleError(error)}`);\n    }\n  };\n\n  return (\n    <BaseContainer>\n      <div>\n      <Header height=\"100\"/>\n      <div className=\"login container\">\n        <div className=\"login form\">\n          <FormField\n            label=\"Username\"\n            value={username}\n            onChange={un => setUsername(un)}\n          />\n          <FormField\n            label=\"Password\"\n            value={password}\n            onChange={n => setPassword(n)}\n          />\n          <div className=\"registration button-container\">\n            <Button\n                width=\"100%\"\n                onClick={() => goRegister()}\n            >\n              Register\n            </Button>\n          </div>\n          <div className=\"login button-container\">\n            <Button\n                disabled={!username || !password}\n                width=\"100%\"\n                onClick={() => doLogin()}\n            >\n              Login\n            </Button>\n          </div>\n        </div>\n      </div>\n      </div>\n    </BaseContainer>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}