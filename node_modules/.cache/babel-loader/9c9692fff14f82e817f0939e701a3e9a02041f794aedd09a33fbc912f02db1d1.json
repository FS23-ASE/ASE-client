{"ast":null,"code":"import _regeneratorRuntime from \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-Client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-Client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-Client/src/components/views/Game.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { api, handleError } from 'helpers/api';\nimport { Spinner } from 'components/ui/Spinner';\nimport { Button } from 'components/ui/Button';\nimport { Link, useHistory } from 'react-router-dom';\nimport BaseContainer from \"components/ui/BaseContainer\";\nimport PropTypes from \"prop-types\";\nimport \"styles/views/Game.scss\";\nimport User from \"../../models/User\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Player = function Player(_ref) {\n  var user = _ref.user;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"player container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player username\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        className: \"linkStyle\",\n        to: \"profile/\".concat(user.id),\n        children: user.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 13,\n        columnNumber: 38\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player id\",\n      children: [\"id: \", user.id, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 1\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 3\n  }, _this);\n};\n_c = Player;\nPlayer.propTypes = {\n  user: PropTypes.object\n};\nvar Game = function Game() {\n  _s();\n  // use react-router-dom's hook to access the history\n  var history = useHistory();\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    users = _useState2[0],\n    setUsers = _useState2[1];\n  var logout = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return api.put('/users/' + localStorage.getItem(\"id\") + \"/logout\");\n          case 3:\n            localStorage.removeItem('token');\n            localStorage.removeItem('id');\n            history.push('/login');\n            _context.next = 11;\n            break;\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            alert(\"Something went wrong during the logout: \\n\".concat(handleError(_context.t0)));\n          case 11:\n            localStorage.removeItem('token');\n            localStorage.removeItem('id');\n            history.push('/login');\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n    return function logout() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    // effect callbacks are synchronous to prevent race conditions. So we put the async function inside:\n    function fetchData() {\n      return _fetchData.apply(this, arguments);\n    }\n    function _fetchData() {\n      _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return api.get('/users');\n            case 3:\n              response = _context2.sent;\n              _context2.next = 6;\n              return new Promise(function (resolve) {\n                return setTimeout(resolve, 1000);\n              });\n            case 6:\n              // Get the returned users and update the state.\n              setUsers(response.data);\n              console.log(response);\n              _context2.next = 15;\n              break;\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(\"Something went wrong while fetching the users: \\n\".concat(handleError(_context2.t0)));\n              console.error(\"Details:\", _context2.t0);\n              alert(\"Something went wrong while fetching the users! See the console for details.\");\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 10]]);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n    fetchData();\n  }, []);\n  var content = /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 17\n  }, _this);\n  if (users) {\n    content = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        className: \"linkStyle\",\n        to: \"/profile/\".concat(localStorage.getItem('id')),\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          width: \"100%\",\n          children: \"View Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        width: \"100%\",\n        onClick: function onClick() {\n          return logout();\n        },\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, _this);\n  }\n  return /*#__PURE__*/_jsxDEV(BaseContainer, {\n    className: \"game container\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"game paragraph\",\n      children: \"You can check your profile or logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, _this), content]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, _this);\n};\n_s(Game, \"gVhM7zwTqCvaylmeuinf9UkR3Dg=\", false, function () {\n  return [useHistory];\n});\n_c2 = Game;\nexport default Game;\nvar _c, _c2;\n$RefreshReg$(_c, \"Player\");\n$RefreshReg$(_c2, \"Game\");","map":{"version":3,"names":["useEffect","useState","api","handleError","Spinner","Button","Link","useHistory","BaseContainer","PropTypes","User","jsxDEV","_jsxDEV","Player","_ref","user","className","children","to","concat","id","username","fileName","_jsxFileName","lineNumber","columnNumber","_this","_c","propTypes","object","Game","_s","history","_useState","_useState2","_slicedToArray","users","setUsers","logout","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","put","localStorage","getItem","removeItem","push","t0","alert","stop","apply","arguments","fetchData","_fetchData","_callee2","response","_callee2$","_context2","get","sent","Promise","resolve","setTimeout","data","console","log","error","content","width","onClick","_c2","$RefreshReg$"],"sources":["/Users/hanli/Desktop/UZH/Advanced Software Engineering/ASE-Client/src/components/views/Game.js"],"sourcesContent":["import {useEffect, useState} from 'react';\nimport {api, handleError} from 'helpers/api';\nimport {Spinner} from 'components/ui/Spinner';\nimport {Button} from 'components/ui/Button';\nimport {Link, useHistory} from 'react-router-dom';\nimport BaseContainer from \"components/ui/BaseContainer\";\nimport PropTypes from \"prop-types\";\nimport \"styles/views/Game.scss\";\nimport User from \"../../models/User\";\n\nconst Player = ({user}) => (\n  <div className=\"player container\">\n    <div className=\"player username\"><Link className=\"linkStyle\" to={`profile/${user.id}`}>{user.username}</Link></div>\n\n<div className=\"player id\">id: {user.id} </div>\n  </div>\n);\n\n\nPlayer.propTypes = {\n  user: PropTypes.object\n};\n\nconst Game = () => {\n  // use react-router-dom's hook to access the history\n  const history = useHistory();\n\n  const [users, setUsers] = useState(null);\n\n  const logout = async () => {\n      try { await api.put('/users/'+localStorage.getItem(\"id\")+\"/logout\");\n          localStorage.removeItem('token');\n          localStorage.removeItem('id');\n          history.push('/login');}\n\n\n      catch (error) {\n          alert(`Something went wrong during the logout: \\n${handleError(error)}`);\n      }\n      localStorage.removeItem('token');\n      localStorage.removeItem('id');\n      history.push('/login');\n\n  }\n\n\n  useEffect(() => {\n    // effect callbacks are synchronous to prevent race conditions. So we put the async function inside:\n    async function fetchData() {\n      try {\n        const response = await api.get('/users');\n\n        await new Promise(resolve => setTimeout(resolve, 1000));\n\n        // Get the returned users and update the state.\n        setUsers(response.data);\n\n        console.log(response);\n      } catch (error) {\n        console.error(`Something went wrong while fetching the users: \\n${handleError(error)}`);\n        console.error(\"Details:\", error);\n        alert(\"Something went wrong while fetching the users! See the console for details.\");\n      }\n    }\n\n    fetchData();\n  }, []);\n\n  let content = <Spinner/>;\n\n    if (users) {\n        content = (\n            <div className=\"game\">\n                <Link className=\"linkStyle\" to={`/profile/${localStorage.getItem('id')}`}>\n                    <Button\n                        width=\"100%\"\n                    >\n                        View Profile\n                    </Button>\n                </Link>\n                <br/>\n                <br/>\n                <Button\n                  width=\"100%\"\n                  onClick={() => logout()}\n                >\n                  Logout\n                </Button>\n            </div>\n    );\n  }\n\n  return (\n    <BaseContainer className=\"game container\">\n      <p className=\"game paragraph\">\n        You can check your profile or logout\n      </p>\n      {content}\n    </BaseContainer>\n  );\n}\n\nexport default Game;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}